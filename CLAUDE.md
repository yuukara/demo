# CLAUDE.md - AIé–‹ç™ºæ”¯æ´ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

> **ç›®çš„**: ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå°‚ç”¨ã®Claude Code AIé–‹ç™ºæ”¯æ´è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«  
> **æ›´æ–°æ—¥**: 2025-08-06  
> **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ**: Spring Boot Employee Management System

## ğŸ› ï¸ **æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯**

### **ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ãƒ»ãƒ©ã‚¤ãƒ–ãƒ©ãƒª**
- **Spring Boot**: 3.5.3 (ãƒ¡ã‚¤ãƒ³ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯)
- **MyBatis**: 3.0.3 (ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒãƒƒãƒ”ãƒ³ã‚°)
- **Jackson**: CSV/JSON ãƒ‡ãƒ¼ã‚¿å‡¦ç†
- **Lombok**: ã‚³ãƒ¼ãƒ‰ç”Ÿæˆï¼ˆgetter/setterç­‰ï¼‰

### **è¨€èªãƒ»ç’°å¢ƒ**
- **Java**: 21 (ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¨™æº–)
- **Maven**: ä¾å­˜é–¢ä¿‚ç®¡ç†ãƒ»ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«
- **SQL Server**: ãƒ¡ã‚¤ãƒ³ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹

### **é–‹ç™ºãƒ„ãƒ¼ãƒ«**
- **Spring Boot DevTools**: ãƒ›ãƒƒãƒˆãƒªãƒ­ãƒ¼ãƒ‰
- **Spring Boot Test**: è‡ªå‹•ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯

## ğŸ“‹ **ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„**

### **Javaã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¹ã‚¿ã‚¤ãƒ«**
```java
// âœ… æ¨å¥¨: æ˜ç¢ºãªã‚¯ãƒ©ã‚¹æ§‹é€ 
@Service
public class EmployeeService {
    private static final int BATCH_SIZE = 100;
    
    @Autowired
    private EmployeeMapper employeeMapper;
    
    /**
     * Javadocã‚³ãƒ¡ãƒ³ãƒˆã‚’å¿…é ˆã¨ã™ã‚‹
     */
    public List<Employee> getAllEmployees() {
        // å®Ÿè£…
    }
}
```

### **å‘½åè¦ç´„**
- **ã‚¯ãƒ©ã‚¹**: PascalCase (`EmployeeService`, `PopulationData`)
- **ãƒ¡ã‚½ãƒƒãƒ‰**: camelCase (`getAllEmployees`, `generateTestData`)
- **å®šæ•°**: UPPER_SNAKE_CASE (`BATCH_SIZE`, `LAST_NAMES`)
- **ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸**: `com.example123.demo.{layer}`

### **ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æ§‹é€ **
```
src/main/java/com/example123/demo/
â”œâ”€â”€ controller/     # REST APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
â”œâ”€â”€ service/        # ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯
â”œâ”€â”€ repository/     # ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹å±¤
â””â”€â”€ domain/         # ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚¯ãƒ©ã‚¹
```

## ğŸ” **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«**

### **å¿…é ˆã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¦ä»¶**
1. **æ©Ÿå¯†æƒ…å ±ã®å–ã‚Šæ‰±ã„**
   - ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒ»APIã‚­ãƒ¼ã¯ç’°å¢ƒå¤‰æ•°ä½¿ç”¨å¿…é ˆ
   - ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ç¦æ­¢
   ```properties
   # âœ… æ­£ã—ã„æ–¹æ³•
   spring.datasource.password=${DB_PASSWORD}
   
   # âŒ ç¦æ­¢
   spring.datasource.password=hardcoded_password_example
   ```

2. **å…¥åŠ›å€¤æ¤œè¨¼**
   - å…¨å…¬é–‹ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã§å…¥åŠ›å€¤æ¤œè¨¼å®Ÿè£…
   - SQLã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³å¯¾ç­–ï¼ˆMyBatisä½¿ç”¨ï¼‰

3. **ãƒ­ã‚°å‡ºåŠ›**
   - æ©Ÿå¯†æƒ…å ±ã‚’ãƒ­ã‚°ã«å‡ºåŠ›ç¦æ­¢
   - ãƒ‡ãƒãƒƒã‚°ãƒ¬ãƒ™ãƒ«ã§ã®PIIæƒ…å ±åˆ¶é™

### **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£**
- ç’°å¢ƒå¤‰æ•°ã«ã‚ˆã‚‹DBèªè¨¼æƒ…å ±ç®¡ç†
- æ¥ç¶šæ–‡å­—åˆ—ã§ã®`trustServerCertificate=true`ã¯é–‹ç™ºç’°å¢ƒã®ã¿

## ğŸ§ª **ãƒ†ã‚¹ãƒˆæ–¹é‡**

### **ãƒ†ã‚¹ãƒˆæˆ¦ç•¥**
- **å˜ä½“ãƒ†ã‚¹ãƒˆ**: å„Service/Controllerã‚¯ãƒ©ã‚¹
- **çµ±åˆãƒ†ã‚¹ãƒˆ**: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šã‚’å«ã‚€ãƒ†ã‚¹ãƒˆ
- **ã‚«ãƒãƒ¬ãƒƒã‚¸ç›®æ¨™**: 80%ä»¥ä¸Š

### **ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«å‘½å**
```
src/test/java/com/example123/demo/
â”œâ”€â”€ service/EmployeeServiceTest.java
â”œâ”€â”€ controller/EmployeeControllerTest.java
â””â”€â”€ repository/EmployeeMapperTest.java
```

### **ãƒ¢ãƒƒã‚¯ã¨ã‚¹ã‚¿ãƒ–**
- å¤–éƒ¨ä¾å­˜ã¯Mockitoä½¿ç”¨
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ†ã‚¹ãƒˆã¯@SpringBootTest

## ğŸ—ï¸ **ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³**

### **ãƒ¬ã‚¤ãƒ¤ãƒ¼åˆ†é›¢**
- **Controller**: HTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆå‡¦ç†ã®ã¿
- **Service**: ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯é›†ç´„
- **Repository**: ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹å°‚ç”¨

### **ã‚¯ãƒ©ã‚¹è¨­è¨ˆ**
- **å˜ä¸€è²¬ä»»åŸå‰‡**: 1ã‚¯ãƒ©ã‚¹1è²¬å‹™
- **æœ€å¤§è¡Œæ•°åˆ¶é™**: 200è¡Œä»¥ä¸‹ã‚’æ¨å¥¨
- **å¤§ããªã‚¯ãƒ©ã‚¹ã¯åˆ†å‰²**: EmployeeService (612è¡Œ) â†’ åˆ†å‰²å¯¾è±¡

### **ä¾‹å¤–å‡¦ç†**
- ã‚«ã‚¹ã‚¿ãƒ ä¾‹å¤–ã‚¯ãƒ©ã‚¹ä½œæˆæ¨å¥¨
- æ±ç”¨Exceptionä½¿ç”¨ã‚’é¿ã‘ã‚‹

## ğŸ“Š **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¦ä»¶**

### **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æœ€é©åŒ–**
- ãƒãƒƒãƒå‡¦ç†: BATCH_SIZE = 100
- SQLServerãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿åˆ¶é™è€ƒæ…® (2100å€‹åˆ¶é™)
- å¤§é‡ãƒ‡ãƒ¼ã‚¿å‡¦ç†æ™‚ã®ãƒ¡ãƒ¢ãƒªåŠ¹ç‡

### **ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“ç›®æ¨™**
- APIå¿œç­”æ™‚é–“: 95%tile ã§ 50msä»¥ä¸‹
- CSVã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ: 10ä¸‡ä»¶ã§10ç§’ä»¥å†…

## ğŸš€ **é–‹ç™ºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼**

### **ãƒ–ãƒ©ãƒ³ãƒæˆ¦ç•¥**
- ç¾åœ¨: `fix/code-review-issues`
- æ©Ÿèƒ½é–‹ç™º: `feature/feature-name`
- ãƒã‚°ä¿®æ­£: `fix/issue-description`

### **ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸**
```
feat: æ–°æ©Ÿèƒ½è¿½åŠ 
fix: ãƒã‚°ä¿®æ­£
refactor: ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°
docs: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°
security: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¿®æ­£
```

### **å¿…é ˆãƒã‚§ãƒƒã‚¯é …ç›®**
- [ ] ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¦ä»¶éµå®ˆ
- [ ] ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ä½œæˆ
- [ ] Javadocè¨˜è¿°
- [ ] å‘½åè¦ç´„æº–æ‹ 
- [ ] ä¾‹å¤–å‡¦ç†å®Ÿè£…

## ğŸ”„ **ç¾åœ¨ã®é‡è¦èª²é¡Œ**

### **ä¿®æ­£æ¸ˆã¿** âœ…
- Task 1.1: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ç’°å¢ƒå¤‰æ•°åŒ–

### **å®Ÿè¡Œäºˆå®š**
- Task 2.1: EmployeeService ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚° (612è¡Œ â†’ åˆ†å‰²)
- Task 2.2: å…¥åŠ›å€¼æ¤œè¨¼è¿½åŠ 
- Task 2.3: UnsafeDataProcessingService ç½®ãæ›ãˆ

## ğŸ”§ **é »ç¹ã«ä½¿ç”¨ã™ã‚‹Mavenã‚³ãƒãƒ³ãƒ‰**

> **æ³¨æ„**: Windows PowerShellç’°å¢ƒã§ã®å®Ÿè¡Œ

### **é–‹ç™ºãƒ»ãƒ†ã‚¹ãƒˆ**
- `.\mvnw spring-boot:run "-Dspring-boot.run.profiles=dev"`: é–‹ç™ºç’°å¢ƒèµ·å‹•
- `.\mvnw test`: å˜ä½“ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
- `.\mvnw verify`: çµ±åˆãƒ†ã‚¹ãƒˆå«ã‚€å…¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

### **ãƒ“ãƒ«ãƒ‰ãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤**
- `.\mvnw clean package "-Pprod"`: æœ¬ç•ªç”¨JARãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ
- `.\mvnw spring-boot:build-image`: Spring Boot Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ä½œæˆ

### **PowerShellå®Ÿè¡Œã®æ³¨æ„ç‚¹**
- Windows PowerShellã§ã¯ `.\mvnw` (ãƒãƒƒã‚¯ã‚¹ãƒ©ãƒƒã‚·ãƒ¥) ã‚’ä½¿ç”¨
- ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã«`-`ãŒå«ã¾ã‚Œã‚‹å ´åˆã¯ãƒ€ãƒ–ãƒ«ã‚¯ã‚©ãƒ¼ãƒˆã§å›²ã‚€
- ä¾‹: `"-Dspring-boot.run.profiles=dev"`, `"-Pprod"`

## ğŸ’¡ **é–‹ç™ºæ™‚ã®é‡è¦ãªå®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³**

### **1. Constructor Injection**
```java
// âœ… æ¨å¥¨: ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³
@Service
public class EmployeeService {
    private final EmployeeMapper employeeMapper;
    
    public EmployeeService(EmployeeMapper employeeMapper) {
        this.employeeMapper = employeeMapper;
    }
}

// âŒ éæ¨å¥¨: @Autowired ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³
@Autowired
private EmployeeMapper employeeMapper;
```

### **2. DTOãƒ‘ã‚¿ãƒ¼ãƒ³**
```java
// ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚’ç›´æ¥APIã§å…¬é–‹ã—ãªã„
@GetMapping("/employees")
public ResponseEntity<List<EmployeeDTO>> getEmployees() {
    // Employee -> EmployeeDTO å¤‰æ›
}
```

### **3. RepositoryæŠ½è±¡åŒ–**
```java
// JpaRepositoryã®é©åˆ‡ãªæ‹¡å¼µ
public interface EmployeeRepository extends JpaRepository<Employee, Long> {
    List<Employee> findByDepartment(String department);
}
```

### **4. Transactionå¢ƒç•Œ**
```java
// @Transactionalã®é©åˆ‡ãªé…ç½®
@Service
@Transactional(readOnly = true)
public class EmployeeService {
    
    @Transactional // æ›¸ãè¾¼ã¿æ“ä½œã®ã¿
    public Employee saveEmployee(Employee employee) {
        return employeeRepository.save(employee);
    }
}
```

### **5. ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³**
```java
// Bean Validationã®æ´»ç”¨
public class EmployeeDTO {
    @NotBlank(message = "åå‰ã¯å¿…é ˆã§ã™")
    private String name;
    
    @Email(message = "æœ‰åŠ¹ãªãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„")
    private String email;
}
```

## ğŸ¤– **Claude Codeã¸ã®æŒ‡ç¤ºäº‹é …**

### **ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³**
- âœ… ã‚³ãƒ¼ãƒ‰ç”Ÿæˆæ™‚ã¯å¿…ãšã“ã®è¦ç´„ã«å¾“ã£ã¦ãã ã•ã„
- âœ… æ–°æ©Ÿèƒ½å®Ÿè£…æ™‚ã¯æ—¢å­˜ãƒ‘ã‚¿ãƒ¼ãƒ³ã¨ã®ä¸€è²«æ€§ã‚’ä¿ã£ã¦ãã ã•ã„
- âœ… ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£é–¢é€£ã®ã‚³ãƒ¼ãƒ‰ã§ã¯ OWASP ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã‚’é©ç”¨ã—ã¦ãã ã•ã„
- âœ… ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚‚ä½µã›ã¦ç”Ÿæˆã—ã¦ãã ã•ã„
- âœ… æ—¥æœ¬èªã‚³ãƒ¡ãƒ³ãƒˆã‚’é©åˆ‡ã«å«ã‚ã¦ãã ã•ã„

### **é‡è¦ãªå®Ÿè£…åŸå‰‡**
1. **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆ**: ç’°å¢ƒå¤‰æ•°ãƒ»å…¥åŠ›å€¤æ¤œè¨¼ã¯å¿…é ˆ
2. **ãƒ†ã‚¹ãƒˆé§†å‹•**: å®Ÿè£…ã¨åŒæ™‚ã«ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ä½œæˆ
3. **ä¿å®ˆæ€§é‡è¦–**: å˜ä¸€è²¬ä»»åŸå‰‡ã¨ã‚¯ãƒªãƒ¼ãƒ³ã‚³ãƒ¼ãƒ‰
4. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**: ãƒãƒƒãƒå‡¦ç†ã¨ãƒ¡ãƒ¢ãƒªåŠ¹ç‡ã‚’è€ƒæ…®

---

**AIé–‹ç™ºæ”¯æ´**: ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯Claude Codeã«ã‚ˆã‚‹é–‹ç™ºæ”¯æ´æœ€é©åŒ–ã®ãŸã‚ã«ä½œæˆã•ã‚Œã¾ã—ãŸã€‚